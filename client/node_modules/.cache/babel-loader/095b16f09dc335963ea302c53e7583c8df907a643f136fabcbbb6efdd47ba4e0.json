{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductModal(_ref){let{open,mode,initialProduct,onClose,onSubmit}=_ref;const[name,setName]=useState(\"\");const[category,setCategory]=useState(\"\");const[description,setDescription]=useState(\"\");const[price,setPrice]=useState(\"\");const[quantity,setQuantity]=useState(\"\");useEffect(()=>{var _initialProduct$name,_initialProduct$categ,_initialProduct$descr;if(!open)return;setName((_initialProduct$name=initialProduct===null||initialProduct===void 0?void 0:initialProduct.name)!==null&&_initialProduct$name!==void 0?_initialProduct$name:\"\");setCategory((_initialProduct$categ=initialProduct===null||initialProduct===void 0?void 0:initialProduct.category)!==null&&_initialProduct$categ!==void 0?_initialProduct$categ:\"\");setDescription((_initialProduct$descr=initialProduct===null||initialProduct===void 0?void 0:initialProduct.description)!==null&&_initialProduct$descr!==void 0?_initialProduct$descr:\"\");setPrice((initialProduct===null||initialProduct===void 0?void 0:initialProduct.price)!=null?String(initialProduct.price):\"\");setQuantity((initialProduct===null||initialProduct===void 0?void 0:initialProduct.quantity)!=null?String(initialProduct.quantity):\"\");},[open,initialProduct]);if(!open)return null;const title=mode===\"edit\"?\"Редактирование товара\":\"Создание товара\";const handleSubmit=e=>{e.preventDefault();const trimmedName=name.trim();const parsedPrice=Number(price);const parsedQuantity=Number(quantity);if(!trimmedName){alert(\"Введите название\");return;}if(!Number.isFinite(parsedPrice)||parsedPrice<0){alert(\"Введите корректную цену (≥ 0)\");return;}if(!Number.isInteger(parsedQuantity)||parsedQuantity<0){alert(\"Введите корректное количество на складе (целое число ≥ 0)\");return;}onSubmit({id:initialProduct===null||initialProduct===void 0?void 0:initialProduct.id,name:trimmedName,category:category.trim(),description:description.trim(),price:parsedPrice,quantity:parsedQuantity});};return/*#__PURE__*/_jsx(\"div\",{className:\"backdrop\",onMouseDown:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onMouseDown:e=>e.stopPropagation(),role:\"dialog\",\"aria-modal\":\"true\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal__header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal__title\",children:title}),/*#__PURE__*/_jsx(\"button\",{className:\"iconBtn\",onClick:onClose,\"aria-label\":\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:name,onChange:e=>setName(e.target.value),placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, \\u0421\\u043C\\u0430\\u0440\\u0442\\u0444\\u043E\\u043D\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:category,onChange:e=>setCategory(e.target.value),placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, \\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u044B\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:description,onChange:e=>setDescription(e.target.value),placeholder:\"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E\\u0435 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[\"\\u0426\\u0435\\u043D\\u0430 (\\u20BD)\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:price,onChange:e=>setPrice(e.target.value),placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, 29990\",inputMode:\"numeric\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043D\\u0430 \\u0441\\u043A\\u043B\\u0430\\u0434\\u0435\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:quantity,onChange:e=>setQuantity(e.target.value),placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, 10\",inputMode:\"numeric\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal__footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn\",onClick:onClose,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn--primary\",children:mode===\"edit\"?\"Сохранить\":\"Создать\"})]})]})]})});}","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","ProductModal","_ref","open","mode","initialProduct","onClose","onSubmit","name","setName","category","setCategory","description","setDescription","price","setPrice","quantity","setQuantity","_initialProduct$name","_initialProduct$categ","_initialProduct$descr","String","title","handleSubmit","e","preventDefault","trimmedName","trim","parsedPrice","Number","parsedQuantity","alert","isFinite","isInteger","id","className","onMouseDown","children","stopPropagation","role","onClick","value","onChange","target","placeholder","autoFocus","inputMode","type"],"sources":["/Users/artemfarniev2013/WebstormProjects/untitled14/client/src/components/ProductModal.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nexport default function ProductModal({ open, mode, initialProduct, onClose, onSubmit }) {\n  const [name, setName] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [quantity, setQuantity] = useState(\"\");\n\n  useEffect(() => {\n    if (!open) return;\n    setName(initialProduct?.name ?? \"\");\n    setCategory(initialProduct?.category ?? \"\");\n    setDescription(initialProduct?.description ?? \"\");\n    setPrice(initialProduct?.price != null ? String(initialProduct.price) : \"\");\n    setQuantity(initialProduct?.quantity != null ? String(initialProduct.quantity) : \"\");\n  }, [open, initialProduct]);\n\n  if (!open) return null;\n\n  const title = mode === \"edit\" ? \"Редактирование товара\" : \"Создание товара\";\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const trimmedName = name.trim();\n    const parsedPrice = Number(price);\n    const parsedQuantity = Number(quantity);\n    if (!trimmedName) {\n      alert(\"Введите название\");\n      return;\n    }\n    if (!Number.isFinite(parsedPrice) || parsedPrice < 0) {\n      alert(\"Введите корректную цену (≥ 0)\");\n      return;\n    }\n    if (!Number.isInteger(parsedQuantity) || parsedQuantity < 0) {\n      alert(\"Введите корректное количество на складе (целое число ≥ 0)\");\n      return;\n    }\n    onSubmit({\n      id: initialProduct?.id,\n      name: trimmedName,\n      category: category.trim(),\n      description: description.trim(),\n      price: parsedPrice,\n      quantity: parsedQuantity,\n    });\n  };\n\n  return (\n    <div className=\"backdrop\" onMouseDown={onClose}>\n      <div className=\"modal\" onMouseDown={(e) => e.stopPropagation()} role=\"dialog\" aria-modal=\"true\">\n        <div className=\"modal__header\">\n          <div className=\"modal__title\">{title}</div>\n          <button className=\"iconBtn\" onClick={onClose} aria-label=\"Закрыть\">\n            ✕\n          </button>\n        </div>\n        <form className=\"form\" onSubmit={handleSubmit}>\n          <label className=\"label\">\n            Название\n            <input\n              className=\"input\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Например, Смартфон\"\n              autoFocus\n            />\n          </label>\n          <label className=\"label\">\n            Категория\n            <input\n              className=\"input\"\n              value={category}\n              onChange={(e) => setCategory(e.target.value)}\n              placeholder=\"Например, Телефоны\"\n            />\n          </label>\n          <label className=\"label\">\n            Описание\n            <input\n              className=\"input\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              placeholder=\"Краткое описание товара\"\n            />\n          </label>\n          <label className=\"label\">\n            Цена (₽)\n            <input\n              className=\"input\"\n              value={price}\n              onChange={(e) => setPrice(e.target.value)}\n              placeholder=\"Например, 29990\"\n              inputMode=\"numeric\"\n            />\n          </label>\n          <label className=\"label\">\n            Количество на складе\n            <input\n              className=\"input\"\n              value={quantity}\n              onChange={(e) => setQuantity(e.target.value)}\n              placeholder=\"Например, 10\"\n              inputMode=\"numeric\"\n            />\n          </label>\n          <div className=\"modal__footer\">\n            <button type=\"button\" className=\"btn\" onClick={onClose}>\n              Отмена\n            </button>\n            <button type=\"submit\" className=\"btn btn--primary\">\n              {mode === \"edit\" ? \"Сохранить\" : \"Создать\"}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}